<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>AICENGHUB</title>
  <link rel="icon" type="image/jpeg" href="./public/favicoaiceng.jpg">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link rel="preload" as="image" href="./public/crazybunny.jpg">
  <link rel="preload" as="audio" href="./public/bunnygrowl.mp4">
  <link href="https://fonts.googleapis.com/css2?family=Bebas+Neue&family=Barlow:wght@400;500;600;700&display=swap" rel="stylesheet">
  <style>
    :root {
      --bg-1: #120e24;
      --bg-2: #1e1b3f;
      --ink: #f8f7f5;
      --muted: #cec7b7;
      --gold: #f4b73f;
      --panel: rgba(18, 14, 36, 0.82);
      --border: rgba(244, 183, 63, 0.45);
      --shadow: 0 16px 38px rgba(0, 0, 0, 0.38);
    }

    * {
      box-sizing: border-box;
    }

    body {
      margin: 0;
      min-height: 100vh;
      font-family: "Barlow", "Segoe UI", Tahoma, sans-serif;
      color: var(--ink);
      background:
        linear-gradient(180deg, rgba(202, 58, 40, 0.22), transparent 24%),
        radial-gradient(130% 80% at 50% 0%, #3d2a65 0%, var(--bg-2) 42%, var(--bg-1) 100%);
      line-height: 1.45;
    }

    body::before {
      content: "";
      position: fixed;
      inset: 0;
      pointer-events: none;
      background:
        repeating-linear-gradient(
          0deg,
          rgba(255, 255, 255, 0.03) 0,
          rgba(255, 255, 255, 0.03) 1px,
          transparent 2px,
          transparent 5px
        );
      mix-blend-mode: soft-light;
      opacity: 0.55;
      z-index: 0;
    }

    .container {
      position: relative;
      z-index: 1;
      width: min(1200px, 92vw);
      margin: 2.2rem auto 3rem;
    }

    .hero {
      display: grid;
      grid-template-columns: 1.08fr 0.92fr;
      gap: 1.5rem;
      padding: 1.6rem;
      border: 1px solid var(--border);
      border-radius: 20px;
      background:
        linear-gradient(145deg, rgba(30, 184, 199, 0.12), rgba(202, 58, 40, 0.12)),
        var(--panel);
      box-shadow: var(--shadow);
      overflow: hidden;
    }

    .hero h1 {
      margin: 0;
      font-family: "Bebas Neue", Impact, sans-serif;
      letter-spacing: 0.06em;
      font-size: clamp(2.2rem, 6vw, 4rem);
      color: var(--gold);
      text-transform: uppercase;
      text-shadow: 0 6px 14px rgba(0, 0, 0, 0.35);
    }

    .hero p {
      margin-top: 0.7rem;
      max-width: 62ch;
      color: var(--muted);
      font-size: clamp(1rem, 2.2vw, 1.08rem);
    }

    .lang-switch {
      display: inline-flex;
      gap: 0.4rem;
      margin-top: 0.2rem;
    }

    .lang-btn {
      border: 1px solid rgba(255, 255, 255, 0.3);
      background: rgba(255, 255, 255, 0.07);
      color: var(--ink);
      border-radius: 999px;
      padding: 0.32rem 0.62rem;
      font: inherit;
      font-size: 0.78rem;
      font-weight: 700;
      letter-spacing: 0.04em;
      cursor: pointer;
      text-transform: uppercase;
    }

    .lang-btn[aria-pressed="true"] {
      color: #1a1310;
      border-color: rgba(244, 183, 63, 0.94);
      background: linear-gradient(180deg, #f7ca6f, #f0a933);
      box-shadow: 0 0 0 2px rgba(247, 202, 111, 0.16);
    }

    .search-bar {
      display: flex;
      gap: 0.5rem;
      flex-wrap: wrap;
      align-items: center;
    }

    .search-input {
      flex: 1 1 260px;
      min-width: 180px;
      border-radius: 10px;
      border: 1px solid rgba(255, 255, 255, 0.3);
      background: rgba(12, 10, 24, 0.8);
      color: var(--ink);
      padding: 0.62rem 0.72rem;
      font: inherit;
    }

    .search-input::placeholder {
      color: rgba(248, 247, 245, 0.7);
    }

    .search-btn {
      border: 1px solid rgba(244, 183, 63, 0.8);
      background: linear-gradient(180deg, #f7ca6f, #f0a933);
      color: #1a1310;
      border-radius: 10px;
      padding: 0.62rem 0.9rem;
      font: inherit;
      font-weight: 700;
      cursor: pointer;
      text-transform: uppercase;
      letter-spacing: 0.02em;
    }

    .hero-image-wrap {
      align-self: stretch;
      border-radius: 14px;
      overflow: hidden;
      border: 1px solid rgba(244, 183, 63, 0.38);
      box-shadow: inset 0 0 0 1px rgba(255, 255, 255, 0.08);
      background: #0f0d19;
    }

    .hero-image-wrap img {
      width: 100%;
      height: 100%;
      object-fit: cover;
      display: block;
      filter: saturate(1.08) contrast(1.06);
    }

    .tabs-shell {
      margin-top: 1.2rem;
      border-radius: 20px;
      border: 1px solid var(--border);
      background: var(--panel);
      box-shadow: var(--shadow);
      overflow: hidden;
    }

    .tabs-top {
      display: flex;
      align-items: center;
      gap: 0.8rem;
      padding: 0.9rem;
      border-bottom: 1px solid rgba(244, 183, 63, 0.28);
      background: rgba(0, 0, 0, 0.14);
    }

    .tablist {
      display: flex;
      flex-wrap: wrap;
      gap: 0.42rem;
      flex: 1 1 auto;
      min-width: 0;
    }

    .tab-search {
      margin-left: auto;
      flex: 0 1 380px;
      min-width: 260px;
      max-width: 42%;
    }

    .tab-search .search-btn {
      flex: 0 0 auto;
    }

    .tab-btn {
      border: 1px solid rgba(255, 255, 255, 0.28);
      background: rgba(255, 255, 255, 0.04);
      color: #f2edf2;
      border-radius: 999px;
      padding: 0.5rem 0.85rem;
      font-weight: 600;
      font-size: 0.82rem;
      letter-spacing: 0.03em;
      cursor: pointer;
      text-transform: uppercase;
      transition: all 160ms ease;
    }

    .tab-btn:hover {
      filter: brightness(1.08);
    }

    .tab-btn[aria-selected="true"] {
      outline: 2px solid rgba(255, 242, 201, 0.95);
      outline-offset: 1px;
      box-shadow: 0 0 0 2px rgba(0, 0, 0, 0.22) inset;
    }

    .tab-btn[data-filter-key="all"] {
      background: rgba(244, 183, 63, 0.2);
      border-color: rgba(244, 183, 63, 0.72);
      color: #ffefbf;
    }

    .tab-btn[data-filter-key="all"][aria-selected="true"] {
      background: #f0b84e;
      border-color: #f0b84e;
      color: #1d1300;
    }

    .tab-btn[data-filter-key="text"] {
      background: rgba(47, 158, 68, 0.2);
      border-color: rgba(47, 158, 68, 0.72);
      color: #d9ffe0;
    }

    .tab-btn[data-filter-key="text"][aria-selected="true"] {
      background: #2f9e44;
      border-color: #2f9e44;
      color: #f0ffef;
    }

    .tab-btn[data-filter-key="image"] {
      background: rgba(242, 201, 76, 0.22);
      border-color: rgba(242, 201, 76, 0.76);
      color: #fff4c6;
    }

    .tab-btn[data-filter-key="image"][aria-selected="true"] {
      background: #f2c94c;
      border-color: #f2c94c;
      color: #2a2100;
    }

    .tab-btn[data-filter-key="video"] {
      background: rgba(242, 153, 74, 0.22);
      border-color: rgba(242, 153, 74, 0.76);
      color: #ffe5c9;
    }

    .tab-btn[data-filter-key="video"][aria-selected="true"] {
      background: #f2994a;
      border-color: #f2994a;
      color: #2b1300;
    }

    .tab-btn[data-filter-key="audio"] {
      background: rgba(59, 130, 246, 0.22);
      border-color: rgba(59, 130, 246, 0.72);
      color: #dbeafe;
    }

    .tab-btn[data-filter-key="audio"][aria-selected="true"] {
      background: #3b82f6;
      border-color: #3b82f6;
      color: #f4f8ff;
    }

    .tab-btn[data-filter-key="code"] {
      background: rgba(139, 92, 246, 0.22);
      border-color: rgba(139, 92, 246, 0.72);
      color: #eee5ff;
    }

    .tab-btn[data-filter-key="code"][aria-selected="true"] {
      background: #8b5cf6;
      border-color: #8b5cf6;
      color: #f6efff;
    }

    .tab-btn[data-filter-key="automation"] {
      background: rgba(139, 94, 52, 0.24);
      border-color: rgba(139, 94, 52, 0.76);
      color: #ffe6cf;
    }

    .tab-btn[data-filter-key="automation"][aria-selected="true"] {
      background: #8b5e34;
      border-color: #8b5e34;
      color: #fff2e4;
    }

    .tab-btn[data-filter-key="learning"] {
      background: rgba(214, 69, 69, 0.24);
      border-color: rgba(214, 69, 69, 0.78);
      color: #ffe1e1;
    }

    .tab-btn[data-filter-key="learning"][aria-selected="true"] {
      background: #d64545;
      border-color: #d64545;
      color: #fff3f3;
    }

    .panel {
      padding: 1.2rem;
    }

    .panel-head {
      margin-bottom: 1rem;
    }

    .panel-head h2 {
      margin: 0;
      font-size: 1.28rem;
      color: #ffe9af;
      letter-spacing: 0.02em;
    }

    .panel-head p {
      margin: 0.38rem 0 0;
      color: var(--muted);
    }

    .search-status {
      margin: 0.4rem 0 1rem;
      color: #f5deb5;
      font-weight: 600;
    }

    .grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(255px, 1fr));
      gap: 0.85rem;
    }

    .card {
      border-radius: 12px;
      border: 1px solid rgba(255, 255, 255, 0.2);
      background: linear-gradient(145deg, rgba(255, 255, 255, 0.05), rgba(30, 184, 199, 0.04));
      padding: 0.9rem;
    }

    .card-head-row {
      display: flex;
      justify-content: space-between;
      align-items: flex-start;
      gap: 0.6rem;
      margin-bottom: 0.36rem;
    }

    .card h3 {
      margin: 0;
      font-size: 1rem;
      color: #fff2c9;
      line-height: 1.2;
    }

    .ability-list {
      display: flex;
      flex-wrap: wrap;
      gap: 0.32rem;
      justify-content: flex-end;
    }

    .ability-pill {
      display: inline-block;
      width: 0.62rem;
      height: 0.62rem;
      border-radius: 999px;
      border: 1px solid rgba(255, 255, 255, 0.28);
      padding: 0;
      font-size: 0;
      line-height: 0;
    }

    .ability-text { background: #2f9e44; color: #f0ffef; }
    .ability-image { background: #f2c94c; color: #2a2100; }
    .ability-video { background: #f2994a; color: #2b1300; }
    .ability-audio { background: #3b82f6; color: #f4f8ff; }
    .ability-code { background: #8b5cf6; color: #f6efff; }
    .ability-automation { background: #8b5e34; color: #fff2e4; }
    .ability-learning { background: #d64545; color: #fff3f3; }

    .card p {
      margin: 0.3rem 0 0.72rem;
      color: var(--muted);
      font-size: 0.94rem;
    }

    .card a {
      color: #8de9ff;
      text-decoration: none;
      font-weight: 600;
    }

    .card a:hover {
      text-decoration: underline;
      color: #cbf6ff;
    }

    footer {
      margin-top: 1rem;
      text-align: center;
      color: rgba(255, 255, 255, 0.75);
      font-size: 0.9rem;
    }

    .bunny-fab {
      position: fixed;
      right: 1rem;
      bottom: 1rem;
      z-index: 3;
      border: 1px solid rgba(244, 183, 63, 0.88);
      background: linear-gradient(180deg, #f7ca6f, #f0a933);
      color: #1a1310;
      border-radius: 999px;
      width: 3.5rem;
      height: 3.5rem;
      padding: 0;
      overflow: hidden;
      display: flex;
      align-items: center;
      justify-content: center;
      box-shadow: 0 10px 24px rgba(0, 0, 0, 0.35);
      cursor: pointer;
    }

    .bunny-fab:hover {
      filter: brightness(1.04);
    }

    .bunny-fab:focus-visible {
      outline: 2px solid #fff2c9;
      outline-offset: 2px;
    }

    .bunny-fab img {
      display: block;
      width: 100%;
      height: 100%;
      object-fit: cover;
    }

    .juleha-fab {
      position: fixed;
      right: 5.8rem;
      bottom: 1rem;
      z-index: 5;
      border: 1px solid rgba(30, 184, 199, 0.85);
      background: linear-gradient(180deg, #39d7e6, #1aa8bd);
      color: #08161a;
      border-radius: 999px;
      min-width: 9.4rem;
      height: 3.8rem;
      padding: 0 1.15rem;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      font: inherit;
      font-size: 1rem;
      font-weight: 700;
      letter-spacing: 0.01em;
      box-shadow: 0 12px 28px rgba(0, 0, 0, 0.35);
      cursor: pointer;
      transition: filter 130ms ease, transform 130ms ease;
    }

    .juleha-fab:hover {
      filter: brightness(1.06);
      transform: translateY(-1px);
    }

    .juleha-fab:focus-visible {
      outline: 2px solid #cbf6ff;
      outline-offset: 2px;
    }

    .juleha-chat-window {
      position: fixed;
      right: 5.6rem;
      bottom: 5.3rem;
      z-index: 50;
      width: min(360px, calc(100vw - 2rem));
      height: 420px;
      border: 1px solid rgba(30, 184, 199, 0.5);
      border-radius: 14px;
      background:
        linear-gradient(155deg, rgba(30, 184, 199, 0.12), rgba(244, 183, 63, 0.08)),
        rgba(14, 12, 28, 0.96);
      box-shadow: 0 18px 40px rgba(0, 0, 0, 0.42);
      display: flex;
      flex-direction: column;
      overflow: hidden;
    }

    .juleha-chat-window[hidden] {
      display: none;
    }

    .juleha-chat-head {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 0.6rem;
      padding: 0.72rem 0.8rem;
      background: rgba(30, 184, 199, 0.14);
      border-bottom: 1px solid rgba(30, 184, 199, 0.35);
    }

    .juleha-chat-head h3 {
      margin: 0;
      font-size: 1rem;
      color: #b9f5ff;
    }

    .juleha-chat-close {
      border: 1px solid rgba(255, 255, 255, 0.28);
      background: rgba(255, 255, 255, 0.08);
      color: #f8f7f5;
      border-radius: 8px;
      padding: 0.32rem 0.52rem;
      font: inherit;
      font-size: 0.84rem;
      font-weight: 600;
      cursor: pointer;
    }

    .juleha-chat-close:hover {
      filter: brightness(1.08);
    }

    .juleha-chat-log {
      flex: 1 1 auto;
      overflow-y: auto;
      padding: 0.8rem;
      display: flex;
      flex-direction: column;
      gap: 0.55rem;
    }

    .juleha-msg {
      margin: 0;
      max-width: 92%;
      padding: 0.52rem 0.68rem;
      border-radius: 10px;
      font-size: 0.9rem;
      line-height: 1.35;
      word-break: break-word;
    }

    .juleha-msg.assistant {
      align-self: flex-start;
      background: rgba(30, 184, 199, 0.16);
      border: 1px solid rgba(30, 184, 199, 0.35);
      color: #d8faff;
    }

    .juleha-msg.user {
      align-self: flex-end;
      background: rgba(244, 183, 63, 0.2);
      border: 1px solid rgba(244, 183, 63, 0.46);
      color: #fff4da;
    }

    .juleha-chat-form {
      display: grid;
      grid-template-columns: minmax(0, 1fr) auto;
      gap: 0.48rem;
      padding: 0.72rem;
      border-top: 1px solid rgba(30, 184, 199, 0.35);
      background: rgba(0, 0, 0, 0.2);
    }

    .juleha-chat-input {
      border-radius: 9px;
      border: 1px solid rgba(255, 255, 255, 0.3);
      background: rgba(10, 8, 19, 0.75);
      color: var(--ink);
      padding: 0.52rem 0.6rem;
      font: inherit;
      min-width: 0;
    }

    .juleha-chat-input::placeholder {
      color: rgba(248, 247, 245, 0.68);
    }

    .juleha-chat-send {
      border: 1px solid rgba(244, 183, 63, 0.8);
      background: linear-gradient(180deg, #f7ca6f, #f0a933);
      color: #1a1310;
      border-radius: 9px;
      padding: 0.52rem 0.72rem;
      font: inherit;
      font-weight: 700;
      cursor: pointer;
    }

    .juleha-chat-send:hover {
      filter: brightness(1.05);
    }

    .crazybunny-overlay {
      position: fixed;
      inset: 0;
      z-index: 60;
      background: #000;
      display: none;
      align-items: center;
      justify-content: center;
      pointer-events: none;
    }

    .crazybunny-overlay.is-active {
      display: flex;
    }

    .crazybunny-overlay img {
      width: 100vw;
      height: 100vh;
      object-fit: cover;
      animation: crazybunny-shake 130ms linear infinite;
    }

    @keyframes crazybunny-shake {
      0% { transform: translateX(-5vw); }
      50% { transform: translateX(5vw); }
      100% { transform: translateX(-5vw); }
    }

    @media (max-width: 920px) {
      .hero {
        grid-template-columns: 1fr;
      }

      .hero-image-wrap {
        order: -1;
        max-height: 420px;
      }

      .tabs-top {
        flex-direction: column;
        align-items: stretch;
      }

      .tab-search {
        margin-left: 0;
        min-width: 0;
        max-width: none;
        width: 100%;
        display: grid;
        grid-template-columns: minmax(0, 1fr) auto;
        gap: 0.55rem;
        align-items: center;
      }

      .tab-search .search-input {
        min-width: 0;
        width: 100%;
        height: 2.8rem;
        max-height: 2.8rem;
        padding-top: 0;
        padding-bottom: 0;
      }

      .tab-search .search-btn {
        height: 2.8rem;
        max-height: 2.8rem;
        padding: 0 1.05rem;
        line-height: 1;
      }

      .juleha-fab {
        right: 5.5rem;
        min-width: 8.7rem;
        height: 3.6rem;
      }

      .juleha-chat-window {
        right: 1rem;
      }
    }

    @media (max-width: 680px) {
      .juleha-fab {
        right: 1rem;
        bottom: 5.15rem;
      }

      .juleha-chat-window {
        right: 1rem;
        bottom: 9.45rem;
        width: calc(100vw - 2rem);
        height: min(420px, 60vh);
      }
    }
  </style>
</head>
<body>
  <main class="container">
    <section class="hero">
      <div class="hero-copy">
        <h1>AICENGHUB</h1>
        <p id="hero-description">Comprehensive AI tool directory for creation, automation, coding, learning, and inspiration. Each tool appears once, and filters/search help you find the best fit quickly.</p>
        <div id="lang-switch" class="lang-switch" role="group" aria-label="Language selector">
          <button class="lang-btn" type="button" data-lang="en" aria-pressed="true">EN</button>
          <button class="lang-btn" type="button" data-lang="id" aria-pressed="false">ID</button>
        </div>
      </div>
      <figure class="hero-image-wrap">
        <img id="hero-image" src="./public/suhuaiceng.jpg" alt="Shifu portrait">
      </figure>
    </section>

    <section class="tabs-shell">
      <div class="tabs-top">
        <div id="tablist" class="tablist" role="toolbar" aria-label="AI ability filters"></div>
        <div id="search-shell" class="search-bar tab-search" aria-label="AI tool search">
          <input id="global-search-input" class="search-input" type="search" placeholder="Search name, abilities, or keywords...">
          <button id="global-search-btn" class="search-btn" type="button">Search</button>
        </div>
      </div>
      <article class="panel" id="directory-panel" aria-live="polite">
        <div class="panel-head">
          <h2 id="panel-title">Master AI Directory</h2>
          <p id="panel-subtitle">Use tabs as one-click ability filters. Search applies on top of the selected filter.</p>
        </div>
        <p id="search-status" class="search-status">Loading tools...</p>
        <div id="tool-grid" class="grid"></div>
      </article>
    </section>

    <footer id="footer-text">AICENGHUB curated link directory.</footer>
  </main>
  <button id="bunny-fab" class="bunny-fab" type="button" aria-label="Bunny">
    <img src="./public/transparentbunny.png" alt="" aria-hidden="true">
  </button>
  <button
    id="juleha-fab"
    class="juleha-fab"
    type="button"
    aria-label="Open Ask Juleha chat"
    aria-expanded="false"
    aria-controls="juleha-chat-window">
    Ask Juleha
  </button>
  <section id="juleha-chat-window" class="juleha-chat-window" aria-label="Ask Juleha chat window" hidden>
    <header class="juleha-chat-head">
      <h3>Ask Juleha</h3>
      <button id="juleha-chat-close" class="juleha-chat-close" type="button" aria-label="Close chat">Close</button>
    </header>
    <div id="juleha-chat-log" class="juleha-chat-log" role="log" aria-live="polite"></div>
    <form id="juleha-chat-form" class="juleha-chat-form">
      <input id="juleha-chat-input" class="juleha-chat-input" type="text" maxlength="500" placeholder="Type your message..." autocomplete="off">
      <button class="juleha-chat-send" type="submit">Send</button>
    </form>
  </section>
  <div id="crazybunny-overlay" class="crazybunny-overlay" aria-hidden="true">
    <img src="./public/crazybunny.jpg" alt="" aria-hidden="true">
  </div>

  <script>
    const ABILITY_FILTER_KEYS = ["all", "text", "image", "video", "audio", "code", "automation", "learning"];
    const I18N = {
      en: {
        htmlLang: "en",
        heroDescription: "Comprehensive AI tool directory for creation, automation, coding, learning, and inspiration. Each tool appears once, and filters/search help you find the best fit quickly.",
        heroImageAlt: "Shifu portrait",
        searchPlaceholder: "Search name, abilities, or keywords...",
        searchButton: "Search",
        panelTitle: "Master AI Directory",
        panelSubtitle: "Use tabs as quick filters. When you type in search, results are matched across all tools.",
        loadingTools: "Loading tools...",
        footerText: "AICENGHUB curated link directory.",
        filterBarLabel: "AI ability filters",
        searchBarLabel: "AI tool search",
        languageSwitchLabel: "Language selector",
        openLink: "Open Link",
        noMatchingTitle: "No matching tools",
        noMatchingDescription: "Try a different filter or broader search keyword.",
        loadError: "Unable to load public/link-list.json. Ensure this file exists in the public folder.",
        abilityLabels: {
          all: "ALL",
          text: "TEXT",
          image: "IMAGE",
          video: "VIDEO",
          audio: "AUDIO",
          code: "CODE",
          automation: "AUTOMATION",
          learning: "LEARNING"
        },
        status(shown, total, activeLabel, query) {
          const searchPart = query ? ` and search "${query}"` : "";
          return `Showing ${shown} of ${total} tools for filter "${activeLabel}"${searchPart}.`;
        }
      },
      id: {
        htmlLang: "id",
        heroDescription: "Direktori alat AI lengkap untuk kreasi, otomasi, coding, pembelajaran, dan inspirasi. Setiap alat hanya muncul sekali, dan filter/pencarian membantu Anda menemukan yang paling sesuai dengan cepat.",
        heroImageAlt: "Potret Shifu",
        searchPlaceholder: "Cari nama, kemampuan, atau kata kunci...",
        searchButton: "Cari",
        panelTitle: "Direktori AI Utama",
        panelSubtitle: "Gunakan tab sebagai filter cepat. Saat Anda mengetik pada pencarian, hasil dicocokkan ke semua alat.",
        loadingTools: "Memuat alat...",
        footerText: "Direktori tautan kurasi AICENGHUB.",
        filterBarLabel: "Filter kemampuan AI",
        searchBarLabel: "Pencarian alat AI",
        languageSwitchLabel: "Pemilih bahasa",
        openLink: "Buka Tautan",
        noMatchingTitle: "Tidak ada alat yang cocok",
        noMatchingDescription: "Coba filter lain atau kata kunci yang lebih umum.",
        loadError: "Tidak dapat memuat public/link-list.json. Pastikan file ini ada di folder public.",
        abilityLabels: {
          all: "SEMUA",
          text: "TEKS",
          image: "GAMBAR",
          video: "VIDEO",
          audio: "AUDIO",
          code: "KODE",
          automation: "OTOMASI",
          learning: "PEMBELAJARAN"
        },
        status(shown, total, activeLabel, query) {
          const searchPart = query ? ` dan pencarian "${query}"` : "";
          return `Menampilkan ${shown} dari ${total} alat untuk filter "${activeLabel}"${searchPart}.`;
        }
      }
    };

    const tablist = document.getElementById("tablist");
    const toolGrid = document.getElementById("tool-grid");
    const searchStatus = document.getElementById("search-status");
    const globalSearchInput = document.getElementById("global-search-input");
    const globalSearchBtn = document.getElementById("global-search-btn");
    const heroDescription = document.getElementById("hero-description");
    const heroImage = document.getElementById("hero-image");
    const searchShell = document.getElementById("search-shell");
    const panelTitle = document.getElementById("panel-title");
    const panelSubtitle = document.getElementById("panel-subtitle");
    const footerText = document.getElementById("footer-text");
    const langSwitch = document.getElementById("lang-switch");
    const bunnyFab = document.getElementById("bunny-fab");
    const julehaFab = document.getElementById("juleha-fab");
    const julehaChatWindow = document.getElementById("juleha-chat-window");
    const julehaChatClose = document.getElementById("juleha-chat-close");
    const julehaChatLog = document.getElementById("juleha-chat-log");
    const julehaChatForm = document.getElementById("juleha-chat-form");
    const julehaChatInput = document.getElementById("juleha-chat-input");
    const crazybunnyOverlay = document.getElementById("crazybunny-overlay");
    const crazybunnyImage = crazybunnyOverlay.querySelector("img");
    const crazybunnySound = new Audio("./public/bunnygrowl.mp4");
    crazybunnySound.preload = "auto";
    crazybunnySound.load();

    let tools = [];
    let activeFilter = "all";
    let searchQuery = "";
    let searchDebounceTimer = null;
    let crazybunnyTimer = null;
    let crazybunnyPreloadedImage = null;
    let currentLanguage = detectInitialLanguage();
    const BUNNY_HIDDEN_COOKIE_NAME = "aicenghub_bunny_hidden";
    const BUNNY_SEEN_COOKIE_NAME = "aicenghub_bunny_seen";
    const BUNNY_HIDE_DAYS = 365;
    const BUNNY_RETURN_CHANCE = 0.05;
    const ABILITY_SEARCH_ALIASES = {
      all: ["all", "semua", "any"],
      text: ["text", "teks", "chat", "tulis", "writing"],
      image: ["image", "gambar", "photo", "foto", "visual", "art"],
      video: ["video", "vid", "film", "klip", "clip"],
      audio: ["audio", "musik", "music", "song", "suara", "voice"],
      code: ["code", "kode", "coding", "programming", "developer", "dev"],
      automation: ["automation", "otomasi", "workflow", "agent", "integrasi", "integration"],
      learning: ["learning", "belajar", "tutorial", "research", "edukasi", "education"]
    };
    const ALLOWED_ABILITIES = new Set(Object.keys(ABILITY_SEARCH_ALIASES).filter((ability) => ability !== "all"));
    const TAG_TO_ABILITIES = {
      text: ["text"],
      image: ["image"],
      video: ["video"],
      audio: ["audio"],
      code: ["code"],
      automation: ["automation"],
      learning: ["learning"],
      research: ["learning"],
      reasoning: ["learning"],
      multimodal_reasoning: ["learning"],
      long_context: ["learning"],
      design: ["image"],
      editing: ["image"],
      music: ["audio"],
      sfx: ["audio"],
      speech: ["audio"],
      app: ["code"],
      avatar: ["video"]
    };
    const SEARCH_TOKEN_TO_ABILITY = Object.entries(ABILITY_SEARCH_ALIASES)
      .reduce((accumulator, [ability, aliases]) => {
        aliases.forEach((alias) => {
          accumulator[alias] = ability;
        });
        return accumulator;
      }, {});

    function getDictionary() {
      return I18N[currentLanguage] || I18N.en;
    }

    function getAbilityLabel(filterKey) {
      return getDictionary().abilityLabels[filterKey] || String(filterKey || "").toUpperCase();
    }

    function detectInitialLanguage() {
      try {
        const savedLanguage = localStorage.getItem("aicenghub.lang");
        if (savedLanguage === "en" || savedLanguage === "id") return savedLanguage;
      } catch {}

      const browserLanguage = String(navigator.language || "en").toLowerCase();
      return browserLanguage.startsWith("id") ? "id" : "en";
    }

    function persistLanguage(lang) {
      try {
        localStorage.setItem("aicenghub.lang", lang);
      } catch {}
    }

    function setCookie(name, value, days) {
      const maxAgeSeconds = Math.max(1, Math.floor(days * 24 * 60 * 60));
      document.cookie = `${encodeURIComponent(name)}=${encodeURIComponent(value)}; Max-Age=${maxAgeSeconds}; Path=/; SameSite=Lax`;
    }

    function getCookie(name) {
      const target = `${encodeURIComponent(name)}=`;
      const parts = String(document.cookie || "").split(";");
      for (const part of parts) {
        const token = part.trim();
        if (token.startsWith(target)) {
          return decodeURIComponent(token.slice(target.length));
        }
      }
      return "";
    }

    function hideBunnyButton() {
      bunnyFab.hidden = true;
      bunnyFab.style.display = "none";
      bunnyFab.setAttribute("aria-hidden", "true");
    }

    function showBunnyButton() {
      bunnyFab.hidden = false;
      bunnyFab.style.display = "flex";
      bunnyFab.removeAttribute("aria-hidden");
    }

    function shouldShowBunnyOnLoad() {
      const hasSeenBefore = getCookie(BUNNY_SEEN_COOKIE_NAME) === "1";
      if (!hasSeenBefore) {
        setCookie(BUNNY_SEEN_COOKIE_NAME, "1", 3650);
        return true;
      }
      return Math.random() < BUNNY_RETURN_CHANCE;
    }

    function updateLanguageButtons() {
      const buttons = Array.from(langSwitch.querySelectorAll(".lang-btn"));
      buttons.forEach((button) => {
        const isActive = button.dataset.lang === currentLanguage;
        button.setAttribute("aria-pressed", isActive ? "true" : "false");
      });
    }

    function applyTranslations() {
      const dictionary = getDictionary();
      document.documentElement.lang = dictionary.htmlLang;
      heroDescription.textContent = dictionary.heroDescription;
      heroImage.alt = dictionary.heroImageAlt;
      globalSearchInput.placeholder = dictionary.searchPlaceholder;
      globalSearchBtn.textContent = dictionary.searchButton;
      panelTitle.textContent = dictionary.panelTitle;
      panelSubtitle.textContent = dictionary.panelSubtitle;
      footerText.textContent = dictionary.footerText;
      tablist.setAttribute("aria-label", dictionary.filterBarLabel);
      searchShell.setAttribute("aria-label", dictionary.searchBarLabel);
      langSwitch.setAttribute("aria-label", dictionary.languageSwitchLabel);

      if (!tools.length) {
        searchStatus.textContent = dictionary.loadingTools;
      }

      updateLanguageButtons();
    }

    function setLanguage(lang) {
      if (!I18N[lang] || lang === currentLanguage) return;
      currentLanguage = lang;
      persistLanguage(lang);
      applyTranslations();
      buildFilterTabs();
      renderTools();
    }

    function bindLanguageSwitch() {
      const buttons = Array.from(langSwitch.querySelectorAll(".lang-btn"));
      buttons.forEach((button) => {
        button.addEventListener("click", () => setLanguage(button.dataset.lang));
      });
    }

    function normalize(text) {
      return String(text || "").toLowerCase();
    }

    function tokenizeSearchQuery(query) {
      return normalize(query)
        .split(/\s+/)
        .map((token) => token.trim())
        .filter(Boolean);
    }

    function sanitizeUrl(rawUrl) {
      const candidate = String(rawUrl || "").trim();
      if (!candidate) return "#";

      try {
        const parsed = new URL(candidate);
        const allowedProtocols = new Set(["https:", "http:"]);
        if (!allowedProtocols.has(parsed.protocol)) return "#";
        if (!parsed.hostname) return "#";
        return parsed.href;
      } catch {
        return "#";
      }
    }

    function normalizeAbilities(rawTool) {
      const directAbilities = Array.isArray(rawTool.abilities)
        ? rawTool.abilities.map((ability) => normalize(ability)).filter(Boolean)
        : [];
      const normalizedDirectAbilities = [...new Set(directAbilities)].filter((ability) => ALLOWED_ABILITIES.has(ability));
      if (normalizedDirectAbilities.length) return normalizedDirectAbilities;

      const tags = Array.isArray(rawTool.tags)
        ? rawTool.tags.map((tag) => normalize(tag)).filter(Boolean)
        : [];
      const inferredAbilities = [...new Set(tags.flatMap((tag) => TAG_TO_ABILITIES[tag] || []))]
        .filter((ability) => ALLOWED_ABILITIES.has(ability));
      return inferredAbilities;
    }

    function sanitizeTool(rawTool) {
      const abilities = normalizeAbilities(rawTool);

      return {
        name: String(rawTool.name || "Unknown Tool"),
        url: sanitizeUrl(rawTool.url),
        description: String(rawTool.description || ""),
        abilities
      };
    }

    function createAbilityPill(ability) {
      const pill = document.createElement("span");
      pill.className = `ability-pill ability-${ability}`;
      const label = getAbilityLabel(ability);
      pill.setAttribute("aria-label", label);
      pill.title = label;
      return pill;
    }

    function createToolCard(tool) {
      const card = document.createElement("article");
      card.className = "card";

      const head = document.createElement("div");
      head.className = "card-head-row";

      const title = document.createElement("h3");
      title.textContent = tool.name;

      const abilityList = document.createElement("div");
      abilityList.className = "ability-list";
      tool.abilities.forEach((ability) => {
        abilityList.appendChild(createAbilityPill(ability));
      });

      head.append(title, abilityList);

      const description = document.createElement("p");
      description.textContent = tool.description;

      const link = document.createElement("a");
      link.href = tool.url;
      link.target = "_blank";
      link.rel = "noopener noreferrer";
      link.textContent = getDictionary().openLink;

      card.append(head, description, link);
      return card;
    }

    function matchesSearch(tool, query) {
      if (!query) return true;
      const normalizedQuery = normalize(query).trim();
      const tokens = tokenizeSearchQuery(normalizedQuery);
      if (!tokens.length) return true;

      const abilityAliasText = tool.abilities
        .flatMap((ability) => ABILITY_SEARCH_ALIASES[ability] || [ability])
        .join(" ");
      const haystack = normalize([
        tool.name,
        tool.url,
        tool.description,
        tool.abilities.join(" "),
        abilityAliasText
      ].join(" "));

      if (haystack.includes(normalizedQuery)) return true;

      return tokens.some((token) => {
        if (haystack.includes(token)) return true;
        const mappedAbility = SEARCH_TOKEN_TO_ABILITY[token];
        return mappedAbility ? tool.abilities.includes(mappedAbility) : false;
      });
    }

    function matchesFilter(tool, filterKey) {
      if (filterKey === "all") return true;
      return tool.abilities.includes(filterKey);
    }

    function getFilteredTools() {
      const effectiveQuery = searchQuery || (activeFilter !== "all" ? activeFilter : "");
      return tools
        .filter((tool) => matchesSearch(tool, effectiveQuery))
        .sort((a, b) => a.name.localeCompare(b.name));
    }

    function updateFilterButtonState() {
      const buttons = Array.from(tablist.querySelectorAll(".tab-btn"));
      buttons.forEach((button) => {
        const isActive = button.dataset.filterKey === activeFilter;
        button.setAttribute("aria-selected", isActive ? "true" : "false");
        button.tabIndex = isActive ? 0 : -1;
      });
    }

    function renderTools() {
      const results = getFilteredTools();
      toolGrid.innerHTML = "";

      const dictionary = getDictionary();
      const activeLabel = getAbilityLabel(activeFilter);
      const statusFilterLabel = searchQuery && activeFilter === "all"
        ? getAbilityLabel("all")
        : activeLabel;
      searchStatus.textContent = dictionary.status(results.length, tools.length, statusFilterLabel, searchQuery);

      if (!results.length) {
        const emptyCard = document.createElement("article");
        emptyCard.className = "card";
        const title = document.createElement("h3");
        title.textContent = dictionary.noMatchingTitle;
        const text = document.createElement("p");
        text.textContent = dictionary.noMatchingDescription;
        emptyCard.append(title, text);
        toolGrid.appendChild(emptyCard);
        return;
      }

      results.forEach((tool) => {
        toolGrid.appendChild(createToolCard(tool));
      });
    }

    function setActiveFilter(filterKey) {
      activeFilter = filterKey;
      searchQuery = filterKey === "all" ? "" : filterKey;
      globalSearchInput.value = searchQuery;
      updateFilterButtonState();
      renderTools();
    }

    function buildFilterTabs() {
      tablist.innerHTML = "";
      ABILITY_FILTER_KEYS.forEach((filterKey) => {
        const button = document.createElement("button");
        button.className = "tab-btn";
        button.type = "button";
        button.dataset.filterKey = filterKey;
        button.textContent = getAbilityLabel(filterKey);
        button.setAttribute("aria-selected", filterKey === activeFilter ? "true" : "false");
        button.tabIndex = filterKey === activeFilter ? 0 : -1;
        button.addEventListener("click", () => setActiveFilter(filterKey));
        tablist.appendChild(button);
      });

      const buttons = Array.from(tablist.querySelectorAll(".tab-btn"));
      buttons.forEach((button, index) => {
        button.addEventListener("keydown", (event) => {
          if (!["ArrowRight", "ArrowLeft", "Home", "End"].includes(event.key)) return;
          event.preventDefault();

          let nextIndex = index;
          if (event.key === "ArrowRight") nextIndex = (index + 1) % buttons.length;
          if (event.key === "ArrowLeft") nextIndex = (index - 1 + buttons.length) % buttons.length;
          if (event.key === "Home") nextIndex = 0;
          if (event.key === "End") nextIndex = buttons.length - 1;

          buttons[nextIndex].focus();
          setActiveFilter(buttons[nextIndex].dataset.filterKey);
        });
      });
    }

    function bindSearch() {
      function submitSearch() {
        if (searchDebounceTimer) {
          clearTimeout(searchDebounceTimer);
          searchDebounceTimer = null;
        }
        searchQuery = normalize(globalSearchInput.value.trim());
        activeFilter = searchQuery ? "all" : activeFilter;
        updateFilterButtonState();
        renderTools();
      }

      function queueSearch() {
        if (searchDebounceTimer) clearTimeout(searchDebounceTimer);
        searchDebounceTimer = setTimeout(() => {
          submitSearch();
        }, 500);
      }

      globalSearchBtn.addEventListener("click", submitSearch);
      globalSearchInput.addEventListener("input", queueSearch);
      globalSearchInput.addEventListener("keydown", (event) => {
        if (event.key !== "Enter") return;
        event.preventDefault();
        submitSearch();
      });
    }

    function bindBunnyButton() {
      if (!shouldShowBunnyOnLoad()) {
        hideBunnyButton();
        return;
      }
      showBunnyButton();

      bunnyFab.addEventListener("click", () => {
        if (crazybunnyTimer) {
          clearTimeout(crazybunnyTimer);
          crazybunnyTimer = null;
        }
        crazybunnyOverlay.classList.add("is-active");
        try {
          crazybunnySound.currentTime = 0;
          const playPromise = crazybunnySound.play();
          if (playPromise && typeof playPromise.catch === "function") {
            playPromise.catch(() => {});
          }
        } catch {}
        setCookie(BUNNY_HIDDEN_COOKIE_NAME, "1", BUNNY_HIDE_DAYS);
        hideBunnyButton();
        crazybunnyTimer = setTimeout(() => {
          crazybunnyOverlay.classList.remove("is-active");
          crazybunnyTimer = null;
        }, 2000);
      }, { once: true });
    }

    function appendJulehaMessage(text, role) {
      const message = document.createElement("p");
      message.className = `juleha-msg ${role}`;
      message.textContent = text;
      julehaChatLog.appendChild(message);
      julehaChatLog.scrollTop = julehaChatLog.scrollHeight;
    }

    function buildJulehaReply(rawText) {
      const text = String(rawText || "").toLowerCase();
      if (text.includes("setup") || text.includes("api") || text.includes("integrat")) {
        return "Ready. Share your AI provider and API details, then I can help wire them into this chat window.";
      }
      return "I am ready for AI hookup. Send your setup direction and I will guide the next step.";
    }

    function openJulehaChat() {
      julehaChatWindow.hidden = false;
      julehaFab.setAttribute("aria-expanded", "true");
      julehaChatInput.focus();
    }

    function closeJulehaChat() {
      julehaChatWindow.hidden = true;
      julehaFab.setAttribute("aria-expanded", "false");
      julehaFab.focus();
    }

    function bindJulehaChat() {
      appendJulehaMessage("Hi. I am Juleha. Ask me anything, and we can wire real AI next.", "assistant");

      julehaFab.addEventListener("click", () => {
        if (julehaChatWindow.hidden) {
          openJulehaChat();
          return;
        }
        closeJulehaChat();
      });

      julehaChatClose.addEventListener("click", () => {
        closeJulehaChat();
      });

      julehaChatForm.addEventListener("submit", (event) => {
        event.preventDefault();
        const text = julehaChatInput.value.trim();
        if (!text) return;
        appendJulehaMessage(text, "user");
        julehaChatInput.value = "";
        setTimeout(() => {
          appendJulehaMessage(buildJulehaReply(text), "assistant");
        }, 260);
      });

      document.addEventListener("keydown", (event) => {
        if (event.key === "Escape" && !julehaChatWindow.hidden) {
          closeJulehaChat();
        }
      });
    }

    function primeCrazyBunnyAssets() {
      crazybunnyPreloadedImage = new Image();
      crazybunnyPreloadedImage.src = crazybunnyImage.src;
      try {
        crazybunnySound.load();
      } catch {}
    }

    async function loadTools() {
      try {
        const response = await fetch("./public/link-list.json");
        if (!response.ok) throw new Error(`HTTP ${response.status}`);
        const data = await response.json();
        if (!Array.isArray(data)) throw new Error("Invalid JSON shape");
        tools = data.map(sanitizeTool);
        renderTools();
      } catch (error) {
        searchStatus.textContent = getDictionary().loadError;
        console.error("Failed to load tool data:", error);
      }
    }

    applyTranslations();
    primeCrazyBunnyAssets();
    buildFilterTabs();
    bindSearch();
    bindLanguageSwitch();
    bindBunnyButton();
    bindJulehaChat();
    loadTools();
  </script>
</body>
</html>

